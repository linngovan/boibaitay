<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√≥i B√†i T√¢y - Kh√°m Ph√° T∆∞∆°ng Lai</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: white;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            color: rgba(255,255,255,0.9);
            font-size: 1.1em;
            max-width: 600px;
        }

        .card-section {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            text-align: center;
            width: 100%;
            max-width: 600px;
            backdrop-filter: blur(10px);
        }

        .start-btn {
            background: linear-gradient(135deg, #ff6b6b, #feca57);
            color: white;
            border: none;
            padding: 20px 50px;
            font-size: 1.3em;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(255,107,107,0.3);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(255,107,107,0.4);
        }

        .start-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .result {
            display: none;
            text-align: left;
            margin-top: 30px;
        }

        .card-name {
            text-align: center;
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(135deg, rgba(102,126,234,0.1), rgba(118,75,162,0.1));
            border-radius: 15px;
            border: 2px solid rgba(102,126,234,0.2);
        }

        .overview {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid #667eea;
        }

        .overview h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .overview p {
            font-size: 1.1em;
            line-height: 1.6;
            color: #555;
        }

        .details {
            margin-bottom: 25px;
        }

        .details h3 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.4em;
            text-align: center;
        }

        .detail-item {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
            border-left: 4px solid;
        }

        .detail-item.love {
            border-left-color: #ff6b6b;
        }

        .detail-item.work {
            border-left-color: #4ecdc4;
        }

        .detail-item.family {
            border-left-color: #45b7d1;
        }

        .detail-item h4 {
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .detail-item.love h4 {
            color: #ff6b6b;
        }

        .detail-item.work h4 {
            color: #4ecdc4;
        }

        .detail-item.family h4 {
            color: #45b7d1;
        }

        .detail-item p {
            line-height: 1.6;
            color: #666;
        }

        .conclusion {
            background: linear-gradient(135deg, #96e6a1, #d4fc79);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
        }

        .conclusion h3 {
            color: #2d5a3d;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .conclusion p {
            font-size: 1.1em;
            line-height: 1.7;
            color: #2d5a3d;
            font-weight: 500;
        }

        .new-reading-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 30px;
            transition: all 0.3s ease;
        }

        .new-reading-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102,126,234,0.3);
        }

        .error {
            background: #ffe6e6;
            color: #d63031;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #d63031;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .header h1 {
                font-size: 2em;
            }

            .card-section {
                padding: 25px;
                margin: 0 10px;
            }

            .start-btn {
                padding: 18px 40px;
                font-size: 1.1em;
            }

            .card-name {
                font-size: 1.6em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîÆ B√≥i B√†i T√¢y</h1>
            <p>Kh√°m ph√° nh·ªØng ƒëi·ªÅu th√∫ v·ªã v·ªÅ t∆∞∆°ng lai qua l√° b√†i ƒë·ªãnh m·ªánh c·ªßa b·∫°n</p>
        </div>

        <div class="card-section">
            <div id="startSection">
                <h2 style="margin-bottom: 20px; color: #667eea;">S·∫µn s√†ng kh√°m ph√° t∆∞∆°ng lai?</h2>
                <p style="margin-bottom: 30px; color: #666; font-size: 1.1em;">
                    Nh·∫•n n√∫t b√™n d∆∞·ªõi ƒë·ªÉ b·∫Øt ƒë·∫ßu h√†nh tr√¨nh b√≥i b√†i. V≈© tr·ª• s·∫Ω ch·ªçn cho b·∫°n m·ªôt l√° b√†i ƒë·ªãnh m·ªánh!
                </p>
                <button class="start-btn" onclick="startReading()">üé¥ B·∫Øt ƒê·∫ßu B√≥i B√†i</button>
            </div>

            <div class="loading" id="loadingSection">
                <div class="spinner"></div>
                <p style="color: #667eea; font-size: 1.2em;">ƒêang k·∫øt n·ªëi v·ªõi v≈© tr·ª•...</p>
                <p style="color: #999; margin-top: 10px;">Vui l√≤ng ch·ªù trong gi√¢y l√°t</p>
            </div>

            <div class="result" id="resultSection">
                <div class="card-name" id="cardName"></div>
                
                <div class="overview">
                    <h3>üìã T·ªïng Quan</h3>
                    <p id="overviewText"></p>
                </div>

                <div class="details">
                    <h3>üîç Chi Ti·∫øt</h3>
                    
                    <div class="detail-item love">
                        <h4>üíñ T√¨nh C·∫£m</h4>
                        <p id="loveText"></p>
                    </div>

                    <div class="detail-item work">
                        <h4>üíº C√¥ng Vi·ªác</h4>
                        <p id="workText"></p>
                    </div>

                    <div class="detail-item family">
                        <h4>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Gia ƒê√¨nh</h4>
                        <p id="familyText"></p>
                    </div>
                </div>

                <div class="conclusion">
                    <h3>‚ú® K·∫øt Lu·∫≠n</h3>
                    <p id="conclusionText"></p>
                </div>

                <div style="text-align: center;">
                    <button class="new-reading-btn" onclick="resetReading()">üîÑ B√≥i L·∫°i</button>
                </div>
            </div>

            <div class="error" id="errorSection" style="display: none;">
                <h3>‚ö†Ô∏è C√≥ l·ªói x·∫£y ra</h3>
                <p id="errorText">Kh√¥ng th·ªÉ k·∫øt n·ªëi v·ªõi server. Vui l√≤ng th·ª≠ l·∫°i sau.</p>
                <button class="new-reading-btn" onclick="resetReading()" style="margin-top: 15px;">üîÑ Th·ª≠ L·∫°i</button>
            </div>
        </div>
    </div>

    <script>
        // Sample data for testing when API fails
        const sampleData = {
            "card": "Queen of Hearts - Upright",
            "card_vi": "ƒê·∫ßm C∆° - Xu√¥i",
            "title": "T√¨nh y√™u th∆∞∆°ng, s·ª± quan t√¢m v√† tr·ª±c gi√°c m·∫°nh m·∫Ω",
            "content": {
                "tinh_cam": "Th·ªùi gian n√†y, b·∫°n c√≥ th·ªÉ g·∫∑p ƒë∆∞·ª£c m·ªôt ng∆∞·ªùi ƒë·∫∑c bi·ªát ho·∫∑c m·ªëi quan h·ªá hi·ªán t·∫°i s·∫Ω tr·ªü n√™n s√¢u s·∫Øc h∆°n. T√¨nh y√™u ƒëang ·ªü xung quanh b·∫°n, h√£y m·ªü l√≤ng ƒë·ªÉ ƒë√≥n nh·∫≠n nh·ªØng c·∫£m x√∫c t·ªët ƒë·∫πp.",
                "gia_dinh": "Vai tr√≤ c·ªßa b·∫°n trong gia ƒë√¨nh s·∫Ω tr·ªü n√™n quan tr·ªçng h∆°n. B·∫°n c√≥ th·ªÉ l√† ng∆∞·ªùi mang l·∫°i s·ª± ·∫•m √°p v√† k·∫øt n·ªëi c√°c th√†nh vi√™n l·∫°i v·ªõi nhau. H√£y l·∫Øng nghe v√† chia s·∫ª nhi·ªÅu h∆°n.",
                "cong_viec": "Kh·∫£ nƒÉng giao ti·∫øp v√† s·ª± th·∫•u hi·ªÉu c·ªßa b·∫°n s·∫Ω gi√∫p √≠ch r·∫•t nhi·ªÅu trong c√¥ng vi·ªác. ƒê√¢y l√† th·ªùi ƒëi·ªÉm t·ªët ƒë·ªÉ h·ª£p t√°c, x√¢y d·ª±ng m·ªëi quan h·ªá v√† ph√°t tri·ªÉn c√°c d·ª± √°n s√°ng t·∫°o."
            },
            "loi_khuyen": "H√£y tin t∆∞·ªüng v√†o tr·ª±c gi√°c c·ªßa m√¨nh v√† ƒë·ª´ng ng·∫°i b√†y t·ªè c·∫£m x√∫c. S·ª± ch√¢n th√†nh v√† l√≤ng t·ªët s·∫Ω mang l·∫°i nh·ªØng ƒëi·ªÅu tuy·ªát v·ªùi. D√†nh th·ªùi gian chƒÉm s√≥c b·∫£n th√¢n v√† nh·ªØng ng∆∞·ªùi b·∫°n y√™u th∆∞∆°ng."
        };

        async function startReading() {
            // Hide start section and show loading
            document.getElementById('startSection').style.display = 'none';
            document.getElementById('loadingSection').style.display = 'block';
            document.getElementById('errorSection').style.display = 'none';
            document.getElementById('resultSection').style.display = 'none';

            try {
                // Try multiple approaches to call the API
                let data;
                let apiSuccess = false;

                // Method 1: Direct call with CORS mode
                try {
                    const response = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyBGQHZMHE7c6EniQJ8wIOZRug5iYRjfrMo', {
                        method: 'POST',
                        mode: 'cors',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            "contents": [{
                                "parts": [{
                                    "text": "B·∫°n l√† m·ªôt chuy√™n gia b√≥i b√†i T√¢y. H√£y ng·∫´u nhi√™n ch·ªçn m·ªôt l√° b√†i trong b·ªô b√†i T√¢y g·ªìm 52 l√°, bao g·ªìm 13 l√° trong m·ªói ch·∫•t: Hearts (C∆°), Diamonds (R√¥), Clubs (Chu·ªìn), Spades (B√≠ch). Sau ƒë√≥, ch·ªçn m·ªôt chi·ªÅu ng·∫´u nhi√™n: xu√¥i ho·∫∑c ng∆∞·ª£c. H√£y tr·∫£ v·ªÅ k·∫øt qu·∫£ d∆∞·ªõi d·∫°ng JSON ƒë√∫ng chu·∫©n: {\"card\": \"T√™n l√° b√†i ti·∫øng Anh + chi·ªÅu (xu√¥i/ng∆∞·ª£c)\", \"card_vi\": \"T√™n l√° b√†i ti·∫øng Vi·ªát + chi·ªÅu (xu√¥i/ng∆∞·ª£c)\", \"title\": \"T√≥m t·∫Øt √Ω nghƒ©a ch√≠nh c·ªßa l√° b√†i (‚â§ 15 t·ª´)\", \"content\": {\"tinh_cam\": \"√ù nghƒ©a trong chuy·ªán t√¨nh c·∫£m (‚â§ 100 t·ª´)\", \"gia_dinh\": \"√ù nghƒ©a trong quan h·ªá gia ƒë√¨nh (‚â§ 100 t·ª´)\", \"cong_viec\": \"√ù nghƒ©a trong c√¥ng vi·ªác (‚â§ 100 t·ª´)\"}, \"loi_khuyen\": \"L·ªùi khuy√™n t√≠ch c·ª±c (‚â§ 100 t·ª´)\"}. Ch·ªâ tr·∫£ v·ªÅ JSON, kh√¥ng th√™m m√¥ t·∫£ g√¨ kh√°c."
                                }]
                            }]
                        })
                    });

                    if (response.ok) {
                        data = await response.json();
                        apiSuccess = true;
                    }
                } catch (e) {
                    console.log('Method 1 failed:', e);
                }

                // Method 2: Using CORS proxy if method 1 fails
                if (!apiSuccess) {
                    try {
                        const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
                        const targetUrl = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyBGQHZMHE7c6EniQJ8wIOZRug5iYRjfrMo';
                        
                        const response = await fetch(proxyUrl + targetUrl, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'X-Requested-With': 'XMLHttpRequest'
                            },
                            body: JSON.stringify({
                                "contents": [{
                                    "parts": [{
                                        "text": "B·∫°n l√† m·ªôt chuy√™n gia b√≥i b√†i T√¢y. H√£y ng·∫´u nhi√™n ch·ªçn m·ªôt l√° b√†i trong b·ªô b√†i T√¢y g·ªìm 52 l√°, bao g·ªìm 13 l√° trong m·ªói ch·∫•t: Hearts (C∆°), Diamonds (R√¥), Clubs (Chu·ªìn), Spades (B√≠ch). Sau ƒë√≥, ch·ªçn m·ªôt chi·ªÅu ng·∫´u nhi√™n: xu√¥i ho·∫∑c ng∆∞·ª£c. H√£y tr·∫£ v·ªÅ k·∫øt qu·∫£ d∆∞·ªõi d·∫°ng JSON ƒë√∫ng chu·∫©n: {\"card\": \"T√™n l√° b√†i ti·∫øng Anh + chi·ªÅu (xu√¥i/ng∆∞·ª£c)\", \"card_vi\": \"T√™n l√° b√†i ti·∫øng Vi·ªát + chi·ªÅu (xu√¥i/ng∆∞·ª£c)\", \"title\": \"T√≥m t·∫Øt √Ω nghƒ©a ch√≠nh c·ªßa l√° b√†i (‚â§ 15 t·ª´)\", \"content\": {\"tinh_cam\": \"√ù nghƒ©a trong chuy·ªán t√¨nh c·∫£m (‚â§ 100 t·ª´)\", \"gia_dinh\": \"√ù nghƒ©a trong quan h·ªá gia ƒë√¨nh (‚â§ 100 t·ª´)\", \"cong_viec\": \"√ù nghƒ©a trong c√¥ng vi·ªác (‚â§ 100 t·ª´)\"}, \"loi_khuyen\": \"L·ªùi khuy√™n t√≠ch c·ª±c (‚â§ 100 t·ª´)\"}. Ch·ªâ tr·∫£ v·ªÅ JSON, kh√¥ng th√™m m√¥ t·∫£ g√¨ kh√°c."
                                    }]
                                }]
                            })
                        });

                        if (response.ok) {
                            data = await response.json();
                            apiSuccess = true;
                        }
                    } catch (e) {
                        console.log('Method 2 failed:', e);
                    }
                }

                // If API calls fail, use sample data with randomization
                if (!apiSuccess) {
                    console.log('Using fallback sample data');
                    await new Promise(resolve => setTimeout(resolve, 2000)); // Simulate loading time
                    data = generateRandomCard();
                    apiSuccess = true;
                }

                // Process the response
                if (apiSuccess && data) {
                    let cardData;
                    
                    if (data.candidates && data.candidates[0] && data.candidates[0].content) {
                        // Real API response
                        const content = data.candidates[0].content.parts[0].text;
                        let jsonMatch = content.match(/\{[\s\S]*\}/);
                        if (jsonMatch) {
                            cardData = JSON.parse(jsonMatch[0]);
                        } else {
                            throw new Error('Kh√¥ng t√¨m th·∫•y JSON trong ph·∫£n h·ªìi t·ª´ API');
                        }
                    } else {
                        // Fallback data
                        cardData = data;
                    }
                    
                    // Validate required fields
                    if (!cardData.card_vi || !cardData.title || !cardData.content || !cardData.loi_khuyen) {
                        throw new Error('D·ªØ li·ªáu tr·∫£ v·ªÅ kh√¥ng ƒë·∫ßy ƒë·ªß');
                    }
                    
                    displayResult(cardData);
                } else {
                    throw new Error('Kh√¥ng th·ªÉ l·∫•y d·ªØ li·ªáu t·ª´ API');
                }

            } catch (error) {
                console.error('Error details:', error);
                let errorMessage = 'ƒê√£ x·∫£y ra l·ªói kh√¥ng x√°c ƒë·ªãnh';
                
                if (error.message.includes('fetch') || error.message.includes('network')) {
                    errorMessage = 'Kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn server. Vui l√≤ng ki·ªÉm tra k·∫øt n·ªëi m·∫°ng v√† th·ª≠ l·∫°i.';
                } else if (error.message.includes('JSON')) {
                    errorMessage = 'L·ªói x·ª≠ l√Ω d·ªØ li·ªáu t·ª´ server. Vui l√≤ng th·ª≠ l·∫°i.';
                } else {
                    errorMessage = error.message;
                }
                
                showError(errorMessage);
            }
        }

        // Generate random card data as fallback
        function generateRandomCard() {
            const suits = [
                { en: 'Hearts', vi: 'C∆°' },
                { en: 'Diamonds', vi: 'R√¥' },
                { en: 'Clubs', vi: 'Chu·ªìn' },
                { en: 'Spades', vi: 'B√≠ch' }
            ];
            
            const cards = [
                { en: 'Ace', vi: '√Åt' },
                { en: '2', vi: '2' },
                { en: '3', vi: '3' },
                { en: '4', vi: '4' },
                { en: '5', vi: '5' },
                { en: '6', vi: '6' },
                { en: '7', vi: '7' },
                { en: '8', vi: '8' },
                { en: '9', vi: '9' },
                { en: '10', vi: '10' },
                { en: 'Jack', vi: 'B·ªìi' },
                { en: 'Queen', vi: 'ƒê·∫ßm' },
                { en: 'King', vi: 'Gi√†' }
            ];

            const orientations = [
                { en: 'Upright', vi: 'Xu√¥i' },
                { en: 'Reversed', vi: 'Ng∆∞·ª£c' }
            ];

            const randomSuit = suits[Math.floor(Math.random() * suits.length)];
            const randomCard = cards[Math.floor(Math.random() * cards.length)];
            const randomOrientation = orientations[Math.floor(Math.random() * orientations.length)];

            const sampleTitles = [
                "Kh·ªüi ƒë·∫ßu m·ªõi ƒë·∫ßy h·ª©a h·∫πn",
                "C√¢n b·∫±ng v√† h√†i h√≤a trong cu·ªôc s·ªëng",
                "Th·ª≠ th√°ch c·∫ßn v∆∞·ª£t qua",
                "Th√†nh c√¥ng v√† vinh quang",
                "T√¨nh y√™u v√† s·ª± quan t√¢m",
                "S·ª± thay ƒë·ªïi t√≠ch c·ª±c",
                "S·ª©c m·∫°nh n·ªôi t·∫°i v√† √Ω ch√≠",
                "S·ª± th·ªãnh v∆∞·ª£ng v√† may m·∫Øn"
            ];

            const sampleContents = {
                tinh_cam: [
                    "T√¨nh c·∫£m c·ªßa b·∫°n ƒëang trong giai ƒëo·∫°n ph√°t tri·ªÉn t√≠ch c·ª±c. H√£y m·ªü l√≤ng v√† tin t∆∞·ªüng v√†o nh·ªØng c·∫£m x√∫c ch√¢n th√†nh.",
                    "C√≥ th·ªÉ xu·∫•t hi·ªán nh·ªØng th·ª≠ th√°ch trong m·ªëi quan h·ªá, nh∆∞ng ƒë√¢y l√† c∆° h·ªôi ƒë·ªÉ hai ng∆∞·ªùi hi·ªÉu nhau s√¢u s·∫Øc h∆°n.",
                    "Th·ªùi gian n√†y thu·∫≠n l·ª£i cho vi·ªác b√†y t·ªè t√¨nh c·∫£m ho·∫∑c t√¨m ki·∫øm t√¨nh y√™u ƒë√≠ch th·ª±c."
                ],
                gia_dinh: [
                    "Gia ƒë√¨nh s·∫Ω l√† ngu·ªìn ƒë·ªông l·ª±c l·ªõn cho b·∫°n trong th·ªùi gian t·ªõi. H√£y d√†nh nhi·ªÅu th·ªùi gian b√™n nh·ªØng ng∆∞·ªùi th√¢n y√™u.",
                    "C√≥ th·ªÉ c√≥ nh·ªØng b·∫•t ƒë·ªìng nh·ªè trong gia ƒë√¨nh, nh∆∞ng s·ª± hi·ªÉu bi·∫øt v√† bao dung s·∫Ω gi·∫£i quy·∫øt m·ªçi v·∫•n ƒë·ªÅ.",
                    "Vai tr√≤ c·ªßa b·∫°n trong gia ƒë√¨nh s·∫Ω tr·ªü n√™n quan tr·ªçng h∆°n, m·ªçi ng∆∞·ªùi tin t∆∞·ªüng v√† d·ª±a d·∫´m v√†o b·∫°n."
                ],
                cong_viec: [
                    "C√¥ng vi·ªác ƒëang c√≥ nh·ªØng chuy·ªÉn bi·∫øn t√≠ch c·ª±c. ƒê√¢y l√† th·ªùi ƒëi·ªÉm t·ªët ƒë·ªÉ th·ªÉ hi·ªán nƒÉng l·ª±c v√† s√°ng t·∫°o.",
                    "C√≥ th·ªÉ g·∫∑p m·ªôt s·ªë kh√≥ khƒÉn trong c√¥ng vi·ªác, nh∆∞ng s·ª± ki√™n tr√¨ v√† n·ªó l·ª±c s·∫Ω mang l·∫°i k·∫øt qu·∫£ t·ªët.",
                    "C∆° h·ªôi thƒÉng ti·∫øn ho·∫∑c h·ª£p t√°c m·ªõi ƒëang ƒë·∫øn g·∫ßn. H√£y chu·∫©n b·ªã k·ªπ l∆∞·ª°ng ƒë·ªÉ n·∫Øm b·∫Øt c∆° h·ªôi."
                ]
            };

            const sampleAdvice = [
                "H√£y tin t∆∞·ªüng v√†o b·∫£n th√¢n v√† theo ƒëu·ªïi nh·ªØng m·ª•c ti√™u c·ªßa m√¨nh v·ªõi s·ª± quy·∫øt t√¢m cao.",
                "ƒê·ª´ng ng·∫°i thay ƒë·ªïi khi c·∫ßn thi·∫øt. S·ª± linh ho·∫°t s·∫Ω mang l·∫°i nh·ªØng c∆° h·ªôi m·ªõi.",
                "L·∫Øng nghe ti·∫øng n√≥i tr√°i tim v√† ƒë∆∞a ra quy·∫øt ƒë·ªãnh d·ª±a tr√™n c·∫£m x√∫c ch√¢n th·ª±c.",
                "Ki√™n nh·∫´n v√† b·ªÅn b·ªâ s·∫Ω gi√∫p b·∫°n v∆∞·ª£t qua m·ªçi th·ª≠ th√°ch v√† ƒë·∫°t ƒë∆∞·ª£c th√†nh c√¥ng."
            ];

            return {
                card: `${randomCard.en} of ${randomSuit.en} - ${randomOrientation.en}`,
                card_vi: `${randomCard.vi} ${randomSuit.vi} - ${randomOrientation.vi}`,
                title: sampleTitles[Math.floor(Math.random() * sampleTitles.length)],
                content: {
                    tinh_cam: sampleContents.tinh_cam[Math.floor(Math.random() * sampleContents.tinh_cam.length)],
                    gia_dinh: sampleContents.gia_dinh[Math.floor(Math.random() * sampleContents.gia_dinh.length)],
                    cong_viec: sampleContents.cong_viec[Math.floor(Math.random() * sampleContents.cong_viec.length)]
                },
                loi_khuyen: sampleAdvice[Math.floor(Math.random() * sampleAdvice.length)]
            };
        }

        function displayResult(data) {
            // Hide loading and show result
            document.getElementById('loadingSection').style.display = 'none';
            document.getElementById('resultSection').style.display = 'block';

            // Map data to UI elements
            document.getElementById('cardName').textContent = data.card_vi;
            document.getElementById('overviewText').textContent = data.title;
            document.getElementById('loveText').textContent = data.content.tinh_cam;
            document.getElementById('workText').textContent = data.content.cong_viec;
            document.getElementById('familyText').textContent = data.content.gia_dinh;
            document.getElementById('conclusionText').textContent = data.loi_khuyen;
        }

        function showError(message) {
            document.getElementById('loadingSection').style.display = 'none';
            document.getElementById('errorSection').style.display = 'block';
            document.getElementById('errorText').textContent = message || 'Kh√¥ng th·ªÉ k·∫øt n·ªëi v·ªõi server. Vui l√≤ng th·ª≠ l·∫°i sau.';
        }

        function resetReading() {
            // Reset to initial state
            document.getElementById('startSection').style.display = 'block';
            document.getElementById('loadingSection').style.display = 'none';
            document.getElementById('resultSection').style.display = 'none';
            document.getElementById('errorSection').style.display = 'none';
        }
    </script>
</body>
</html>